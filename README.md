
# Plushe


Масштабируемость: Как бы вы расширили вашу систему для добавления “Плюшам” уникальных способностей (например, атака дальнего боя или особая реакция на гаджет) без изменения базового класса?

Сделал бы отдельный task для дальней атаки, в случае с гаджетом, расширил бы метод, скорее всего добавил бы делегаты с callback функциями


Сетевая игра: Опишите кратко ваши шаги по репликации созданной системы для мультиплеера. Какие компоненты и свойства вы бы реплицировали?

В PlayerState добавил бы реплецируемое состояние мобов(Приручен, Враг, Трусливый), что бы клиенты могли допустим видеть каие-либо визуальные эффекты при разных стейтах.


Оптимизация: Если на уровне необходимо разместить 100 “Плюшей” одновременно, какие потенциальные проблемы с производительностью вы видите и как бы вы их решали

Такое кол-во мобов потребует оптимизации AI: использовал бы Mass Crowd, VisibilityBasedAnimTickOption = OnlyTickPoseWhenRendered для дальних мобов, NetCullDistance для сокращения трафика, реже вызывал бы сервисы в BT

__________________________________________________________________________________________

Управление:
E -> Приручить плюша

__________________________________________________________________________________________

Вся логика плюшей находится в BT:как только игрок становится виден плюшу, если он агрессивен, то он бежит на игрока(вампир), если труслив, старатется убежать(гоблин).Если выйти из зоны видимости лорда-вампира, то он он спустя некоторое время потеряет игрока из вида и вернутся на начальную точку, гоблины же стараются убежать в сторону от игрока. Как толкьо мы приручили плюша, он следует за нами, это реализовано через BT и стейт плюша.

DA_Goblin, DA_Vampire - ассеты для настроек плюшей, где можно изменить их скорость и начальное поведение с радиусом обнаружения.
BP_Goblin, BP_Vampire - это сами мобы, у которых свой mesh и анимация
BP_PlusheAIController - хранит конкретный BT для запуска и PlusheAIPerceptionComponent, так же имеется метод UpdatePlusheState, для изменения состояния
BasePlushe - базовый класс мобов, он почти пустой, так как вся логика находится в BehaviorTree
FindEnemyCharacterService - из PlusheAIPerceptionComponent получаем игрока, если моб его видит и ситапит ключ для того что бы его преследовать или убегать от него
MoveAwayTask - отвечает за убегание трусливых мобов от игрока
PlusheCharacter - по сути дефолтный, добавлен лишь Tame(), для приручивание плюшей
